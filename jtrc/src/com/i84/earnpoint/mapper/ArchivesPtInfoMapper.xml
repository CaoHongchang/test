<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.i84.earnpoint.mapper.ArchivesPtInfoMapper" >
  <resultMap id="BaseResultMap" type="com.i84.earnpoint.model.ArchivesPtInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="p_no" property="pNo" jdbcType="VARCHAR" />
    <result column="p_name" property="pName" jdbcType="VARCHAR" />
    <result column="p_url" property="pUrl" jdbcType="VARCHAR" />
    <result column="p_date" property="pDate" jdbcType="TIMESTAMP" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="stuff" property="stuff" jdbcType="INTEGER" />
    <result column="add_date" property="addDate" jdbcType="TIMESTAMP" />
    <result column="file_code" property="fileCode" jdbcType="VARCHAR" />
    <result column="file_name" property="fileName" jdbcType="VARCHAR" />
    <result column="page_num" property="pageNum" jdbcType="INTEGER" />
    <result column="party_date" property="partyDate" jdbcType="TIMESTAMP" />
    <result column="is_party" property="isParty" jdbcType="VARCHAR" />
    <result column="in_date" property="inDate" jdbcType="TIMESTAMP" />
    <result column="zz_date" property="zzDate" jdbcType="TIMESTAMP" />
    <result column="out_date" property="outDate" jdbcType="TIMESTAMP" />
    <result column="jz_date" property="jzDate" jdbcType="TIMESTAMP" />
    <result column="in_org" property="inOrg" jdbcType="VARCHAR" />
    <result column="out_org" property="outOrg" jdbcType="VARCHAR" />
    <result column="sort" property="sort" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, p_no, p_name, p_url, p_date, remark, stuff, add_date, file_code, file_name, page_num, 
    party_date, is_party, in_date, zz_date, out_date, jz_date, in_org, out_org
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from archives_pt_info
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from archives_pt_info
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.i84.earnpoint.model.ArchivesPtInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into archives_pt_info (id, p_no, p_name, 
      p_url, p_date, remark, 
      stuff, add_date, file_code, 
      file_name, page_num, party_date, 
      is_party, in_date, zz_date, 
      out_date, jz_date, in_org, 
      out_org)
    values (#{id,jdbcType=INTEGER}, #{pNo,jdbcType=VARCHAR}, #{pName,jdbcType=VARCHAR}, 
      #{pUrl,jdbcType=VARCHAR}, #{pDate,jdbcType=TIMESTAMP}, #{remark,jdbcType=VARCHAR}, 
      #{stuff,jdbcType=INTEGER}, #{addDate,jdbcType=TIMESTAMP}, #{fileCode,jdbcType=VARCHAR}, 
      #{fileName,jdbcType=VARCHAR}, #{pageNum,jdbcType=INTEGER}, #{partyDate,jdbcType=TIMESTAMP}, 
      #{isParty,jdbcType=VARCHAR}, #{inDate,jdbcType=TIMESTAMP}, #{zzDate,jdbcType=TIMESTAMP}, 
      #{outDate,jdbcType=TIMESTAMP}, #{jzDate,jdbcType=TIMESTAMP}, #{inOrg,jdbcType=VARCHAR}, 
      #{outOrg,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective"  useGeneratedKeys="true" keyProperty="id" parameterType="com.i84.earnpoint.model.ArchivesPtInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into archives_pt_info
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="pNo != null" >
        p_no,
      </if>
      <if test="pName != null" >
        p_name,
      </if>
      <if test="pUrl != null" >
        p_url,
      </if>
      <if test="pDate != null" >
        p_date,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="stuff != null" >
        stuff,
      </if>
      <if test="addDate != null" >
        add_date,
      </if>
      <if test="fileCode != null" >
        file_code,
      </if>
      <if test="fileName != null" >
        file_name,
      </if>
      <if test="pageNum != null" >
        page_num,
      </if>
      <if test="partyDate != null" >
        party_date,
      </if>
      <if test="isParty != null" >
        is_party,
      </if>
      <if test="inDate != null" >
        in_date,
      </if>
      <if test="zzDate != null" >
        zz_date,
      </if>
      <if test="outDate != null" >
        out_date,
      </if>
      <if test="jzDate != null" >
        jz_date,
      </if>
      <if test="inOrg != null" >
        in_org,
      </if>
      <if test="outOrg != null" >
        out_org,
      </if>
      
      <if test="sort != null" >
        sort,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="pNo != null" >
        #{pNo,jdbcType=VARCHAR},
      </if>
      <if test="pName != null" >
        #{pName,jdbcType=VARCHAR},
      </if>
      <if test="pUrl != null" >
        #{pUrl,jdbcType=VARCHAR},
      </if>
      <if test="pDate != null" >
        #{pDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="stuff != null" >
        #{stuff,jdbcType=INTEGER},
      </if>
      <if test="addDate != null" >
        #{addDate,jdbcType=TIMESTAMP},
      </if>
      <if test="fileCode != null" >
        #{fileCode,jdbcType=VARCHAR},
      </if>
      <if test="fileName != null" >
        #{fileName,jdbcType=VARCHAR},
      </if>
      <if test="pageNum != null" >
        #{pageNum,jdbcType=INTEGER},
      </if>
      <if test="partyDate != null" >
        #{partyDate,jdbcType=TIMESTAMP},
      </if>
      <if test="isParty != null" >
        #{isParty,jdbcType=VARCHAR},
      </if>
      <if test="inDate != null" >
        #{inDate,jdbcType=TIMESTAMP},
      </if>
      <if test="zzDate != null" >
        #{zzDate,jdbcType=TIMESTAMP},
      </if>
      <if test="outDate != null" >
        #{outDate,jdbcType=TIMESTAMP},
      </if>
      <if test="jzDate != null" >
        #{jzDate,jdbcType=TIMESTAMP},
      </if>
      <if test="inOrg != null" >
        #{inOrg,jdbcType=VARCHAR},
      </if>
      <if test="outOrg != null" >
        #{outOrg,jdbcType=VARCHAR},
      </if>
      
         <if test="sort != null" >
        #{sort,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.i84.earnpoint.model.ArchivesPtInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update archives_pt_info
    <set >
      <if test="pNo != null" >
        p_no = #{pNo,jdbcType=VARCHAR},
      </if>
      <if test="pName != null" >
        p_name = #{pName,jdbcType=VARCHAR},
      </if>
      <if test="pUrl != null" >
        p_url = #{pUrl,jdbcType=VARCHAR},
      </if>
     
        p_date = #{pDate,jdbcType=TIMESTAMP},
      
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="stuff != null" >
        stuff = #{stuff,jdbcType=INTEGER},
      </if>
      <if test="addDate != null" >
        add_date = #{addDate,jdbcType=TIMESTAMP},
      </if>
      <if test="fileCode != null" >
        file_code = #{fileCode,jdbcType=VARCHAR},
      </if>
      <if test="fileName != null" >
        file_name = #{fileName,jdbcType=VARCHAR},
      </if>
      <if test="pageNum != null" >
        page_num = #{pageNum,jdbcType=INTEGER},
      </if>
      <if test="partyDate != null" >
        party_date = #{partyDate,jdbcType=TIMESTAMP},
      </if>
      <if test="isParty != null" >
        is_party = #{isParty,jdbcType=VARCHAR},
      </if>
      <if test="inDate != null" >
        in_date = #{inDate,jdbcType=TIMESTAMP},
      </if>
      <if test="zzDate != null" >
        zz_date = #{zzDate,jdbcType=TIMESTAMP},
      </if>
      <if test="outDate != null" >
        out_date = #{outDate,jdbcType=TIMESTAMP},
      </if>
      <if test="jzDate != null" >
        jz_date = #{jzDate,jdbcType=TIMESTAMP},
      </if>
      <if test="inOrg != null" >
        in_org = #{inOrg,jdbcType=VARCHAR},
      </if>
      <if test="outOrg != null" >
        out_org = #{outOrg,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.i84.earnpoint.model.ArchivesPtInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update archives_pt_info
    set p_no = #{pNo,jdbcType=VARCHAR},
      p_name = #{pName,jdbcType=VARCHAR},
      p_url = #{pUrl,jdbcType=VARCHAR},
      p_date = #{pDate,jdbcType=TIMESTAMP},
      remark = #{remark,jdbcType=VARCHAR},
      stuff = #{stuff,jdbcType=INTEGER},
      add_date = #{addDate,jdbcType=TIMESTAMP},
      file_code = #{fileCode,jdbcType=VARCHAR},
      file_name = #{fileName,jdbcType=VARCHAR},
      page_num = #{pageNum,jdbcType=INTEGER},
      party_date = #{partyDate,jdbcType=TIMESTAMP},
      is_party = #{isParty,jdbcType=VARCHAR},
      in_date = #{inDate,jdbcType=TIMESTAMP},
      zz_date = #{zzDate,jdbcType=TIMESTAMP},
      out_date = #{outDate,jdbcType=TIMESTAMP},
      jz_date = #{jzDate,jdbcType=TIMESTAMP},
      in_org = #{inOrg,jdbcType=VARCHAR},
      out_org = #{outOrg,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  
   <select id="selectByPno" resultType="java.util.HashMap" parameterType="com.i84.earnpoint.model.ArchivesPtInfo">
    select a.id,file_code,file_name,page_num,date_format(a.add_date,'%Y-%m-%d') add_date,b.realName userName,date_format(a.p_date,'%Y-%m-%d') pdate,
    p_name pname,remark,p_url,date_format(party_date,'%Y-%m-%d') partydate,is_party isparty,
    date_format(in_date,'%Y-%m-%d') indate,date_format(zz_date,'%Y-%m-%d') zzdate,date_format(out_date,'%Y-%m-%d') outdate,
    date_format(jz_date,'%Y-%m-%d') jzdate,in_org inorg,out_org outorg
     from archives_Pt_info a left join t_user b on a.stuff = b.userId
    where p_no = #{pNo,jdbcType=VARCHAR} and del_time is null order by sort
  </select>
  
  
   <update id="sort" parameterType="com.i84.earnpoint.gdcl.BO.SerchBO">
   update archives_Pt_info 
      set sort =  #{sort,jdbcType=INTEGER}
      where id=#{id,jdbcType=INTEGER}
  </update>
  
    <select id="getsort" parameterType="java.util.HashMap" resultType="java.util.HashMap">
  select sort from archives_Pt_info 
  where p_no=#{pno,jdbcType=VARCHAR}
  ORDER BY sort DESC limit 1
  </select>
  
</mapper>