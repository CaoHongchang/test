<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.i84.earnpoint.mapper.UserInfoMapper">
  <resultMap id="BaseResultMap" type="com.i84.earnpoint.model.UserInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="pnum" jdbcType="VARCHAR" property="pnum" />
    <result column="tel" jdbcType="VARCHAR" property="tel" />
    <result column="pwd" jdbcType="VARCHAR" property="pwd" />
    <result column="sex" jdbcType="CHAR" property="sex" />
    <result column="pid" jdbcType="INTEGER" property="pid" />
    <result column="add_date" jdbcType="TIMESTAMP" property="addDate" />
    <result column="da_id" jdbcType="VARCHAR" property="daId" />
    <result column="work_time" jdbcType="TIMESTAMP" property="workTime" />
    <result column="mz" jdbcType="VARCHAR" property="mz" />
    <result column="zzmm" jdbcType="VARCHAR" property="zzmm" />
    <result column="school" jdbcType="VARCHAR" property="school" />
    <result column="graduation_time" jdbcType="TIMESTAMP" property="graduationTime" />
    <result column="major" jdbcType="VARCHAR" property="major" />
    <result column="degree" jdbcType="VARCHAR" property="degree" />
    <result column="domicile" jdbcType="VARCHAR" property="domicile" />
    <result column="adr" jdbcType="VARCHAR" property="adr" />
    <result column="g_tel" jdbcType="VARCHAR" property="gTel" />
    <result column="email" jdbcType="VARCHAR" property="email" />
    <result column="household" jdbcType="VARCHAR" property="household" />
    <result column="domicile_place" jdbcType="VARCHAR" property="domicilePlace" />
    <result column="bank_id" jdbcType="VARCHAR" property="bankId" />
    <result column="bank_num" jdbcType="VARCHAR" property="bankNum" />
    <result column="technical" jdbcType="VARCHAR" property="technical" />
    <result column="te_level" jdbcType="VARCHAR" property="teLevel" />
    <result column="job" jdbcType="VARCHAR" property="job" />
    <result column="get_time" jdbcType="TIMESTAMP" property="getTime" />
    <result column="party_name" jdbcType="VARCHAR" property="partyName" />
    <result column="birth_date" jdbcType="TIMESTAMP" property="birthDate" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="work_name" jdbcType="VARCHAR" property="workName" />
    <result column="place_name" jdbcType="VARCHAR" property="placeName" />
    <result column="part_name" jdbcType="VARCHAR" property="partName" />
    <result column="old_name" jdbcType="VARCHAR" property="oldName" />
    <result column="jg_name" jdbcType="VARCHAR" property="jgName" />
    <result column="marital_status" jdbcType="VARCHAR" property="maritalStatus" />
    <result column="img_url" jdbcType="VARCHAR" property="imgUrl" />
    <result column="qq" jdbcType="VARCHAR" property="qq" />
    <result column="wx" jdbcType="VARCHAR" property="wx" />
    <result column="del_date" jdbcType="TIMESTAMP" property="delDate" />
    <result column="mb1" jdbcType="VARCHAR" property="mb1" />
    <result column="mbda1" jdbcType="VARCHAR" property="mbda1" />
    <result column="mb2" jdbcType="VARCHAR" property="mb2" />
    <result column="mbda2" jdbcType="VARCHAR" property="mbda2" />
    <result column="mb3" jdbcType="VARCHAR" property="mb3" />
    <result column="mbda3" jdbcType="VARCHAR" property="mbda3" />
    <result column="dpno" jdbcType="VARCHAR" property="dpno" />
    <result column="z_date" jdbcType="TIMESTAMP" property="zDate" />
    <result column="d_state" jdbcType="VARCHAR" property="dState" />
    <result column="err_msg" jdbcType="VARCHAR" property="errMsg" />
    <result column="z_no" jdbcType="VARCHAR" property="zNo" />
    <result column="d_point" jdbcType="VARCHAR" property="dPoint" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, name, pnum, tel, pwd, sex, pid, add_date, da_id, work_time, mz, zzmm, school, 
    graduation_time, major, degree, domicile, adr, g_tel, email, household, domicile_place, 
    bank_id, bank_num, technical, te_level, job, get_time, party_name, birth_date, remark, 
    work_name, place_name, part_name, old_name, jg_name, marital_status, img_url, qq, 
    wx, del_date, mb1, mbda1, mb2, mbda2, mb3, mbda3, dpno, z_date, d_state, err_msg, 
    z_no, d_point
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from user_info
    where id = #{id,jdbcType=INTEGER}
  </select>
  
  <!-- 个人用户列表 -->
  <select id="queryUserInfoList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		SELECT
		id, name, pnum, tel, pwd, sex, pid, DATE_FORMAT(add_date, '%Y-%m-%d') as add_date, da_id, work_time, mz, zzmm, school, 
	    graduation_time, major, degree, domicile, adr, g_tel, email, household, domicile_place, 
	    bank_id, bank_num, technical, te_level, job, get_time, party_name, birth_date, remark, 
	    work_name, place_name, part_name, old_name, jg_name, marital_status, img_url, qq, 
	    wx, del_date, mb1, mbda1, mb2, mbda2, mb3, mbda3, dpno, z_date, d_state, err_msg, 
	    z_no, d_point
  	    from user_info
  	    where del_date is null
		<if test="name != null and name != '' ">
			and ( 
				name like  CONCAT('%',#{name,jdbcType=VARCHAR},'%')
				OR pnum like CONCAT('%',#{name,jdbcType=VARCHAR},'%')
			)
		</if>
		<if test="starttime!=null and starttime!=''">
	   		<![CDATA[   and DATE_FORMAT(add_date, '%Y-%m-%d') >=  DATE_FORMAT(#{starttime}, '%Y-%m-%d')   ]]>
	    </if>
	    <if test="endtime!=null and endtime!=''">
	    	<![CDATA[  and DATE_FORMAT(add_date, '%Y-%m-%d') <= DATE_FORMAT(#{endtime}, '%Y-%m-%d')    ]]>
	    </if>
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from user_info
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.i84.earnpoint.model.UserInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into user_info (id, name, pnum, 
      tel, pwd, sex, pid, 
      add_date, da_id, work_time, 
      mz, zzmm, school, graduation_time, 
      major, degree, domicile, 
      adr, g_tel, email, household, 
      domicile_place, bank_id, bank_num, 
      technical, te_level, job, 
      get_time, party_name, birth_date, 
      remark, work_name, place_name, 
      part_name, old_name, jg_name, 
      marital_status, img_url, qq, 
      wx, del_date, mb1, 
      mbda1, mb2, mbda2, 
      mb3, mbda3, dpno, z_date, 
      d_state, err_msg, z_no, 
      d_point)
    values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{pnum,jdbcType=VARCHAR}, 
      #{tel,jdbcType=VARCHAR}, #{pwd,jdbcType=VARCHAR}, #{sex,jdbcType=CHAR}, #{pid,jdbcType=INTEGER}, 
      #{addDate,jdbcType=TIMESTAMP}, #{daId,jdbcType=VARCHAR}, #{workTime,jdbcType=TIMESTAMP}, 
      #{mz,jdbcType=VARCHAR}, #{zzmm,jdbcType=VARCHAR}, #{school,jdbcType=VARCHAR}, #{graduationTime,jdbcType=TIMESTAMP}, 
      #{major,jdbcType=VARCHAR}, #{degree,jdbcType=VARCHAR}, #{domicile,jdbcType=VARCHAR}, 
      #{adr,jdbcType=VARCHAR}, #{gTel,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR}, #{household,jdbcType=VARCHAR}, 
      #{domicilePlace,jdbcType=VARCHAR}, #{bankId,jdbcType=VARCHAR}, #{bankNum,jdbcType=VARCHAR}, 
      #{technical,jdbcType=VARCHAR}, #{teLevel,jdbcType=VARCHAR}, #{job,jdbcType=VARCHAR}, 
      #{getTime,jdbcType=TIMESTAMP}, #{partyName,jdbcType=VARCHAR}, #{birthDate,jdbcType=TIMESTAMP}, 
      #{remark,jdbcType=VARCHAR}, #{workName,jdbcType=VARCHAR}, #{placeName,jdbcType=VARCHAR}, 
      #{partName,jdbcType=VARCHAR}, #{oldName,jdbcType=VARCHAR}, #{jgName,jdbcType=VARCHAR}, 
      #{maritalStatus,jdbcType=VARCHAR}, #{imgUrl,jdbcType=VARCHAR}, #{qq,jdbcType=VARCHAR}, 
      #{wx,jdbcType=VARCHAR}, #{delDate,jdbcType=TIMESTAMP}, #{mb1,jdbcType=VARCHAR}, 
      #{mbda1,jdbcType=VARCHAR}, #{mb2,jdbcType=VARCHAR}, #{mbda2,jdbcType=VARCHAR}, 
      #{mb3,jdbcType=VARCHAR}, #{mbda3,jdbcType=VARCHAR}, #{dpno,jdbcType=VARCHAR}, #{zDate,jdbcType=TIMESTAMP}, 
      #{dState,jdbcType=VARCHAR}, #{errMsg,jdbcType=VARCHAR}, #{zNo,jdbcType=VARCHAR}, 
      #{dPoint,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" useGeneratedKeys="true" keyProperty="id" parameterType="com.i84.earnpoint.model.UserInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into user_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="pnum != null">
        pnum,
      </if>
      <if test="tel != null">
        tel,
      </if>
      <if test="pwd != null">
        pwd,
      </if>
      <if test="sex != null">
        sex,
      </if>
      <if test="pid != null">
        pid,
      </if>
      <if test="addDate != null">
        add_date,
      </if>
      <if test="daId != null">
        da_id,
      </if>
      <if test="workTime != null">
        work_time,
      </if>
      <if test="mz != null">
        mz,
      </if>
      <if test="zzmm != null">
        zzmm,
      </if>
      <if test="school != null">
        school,
      </if>
      <if test="graduationTime != null">
        graduation_time,
      </if>
      <if test="major != null">
        major,
      </if>
      <if test="degree != null">
        degree,
      </if>
      <if test="domicile != null">
        domicile,
      </if>
      <if test="adr != null">
        adr,
      </if>
      <if test="gTel != null">
        g_tel,
      </if>
      <if test="email != null">
        email,
      </if>
      <if test="household != null">
        household,
      </if>
      <if test="domicilePlace != null">
        domicile_place,
      </if>
      <if test="bankId != null">
        bank_id,
      </if>
      <if test="bankNum != null">
        bank_num,
      </if>
      <if test="technical != null">
        technical,
      </if>
      <if test="teLevel != null">
        te_level,
      </if>
      <if test="job != null">
        job,
      </if>
      <if test="getTime != null">
        get_time,
      </if>
      <if test="partyName != null">
        party_name,
      </if>
      <if test="birthDate != null">
        birth_date,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="workName != null">
        work_name,
      </if>
      <if test="placeName != null">
        place_name,
      </if>
      <if test="partName != null">
        part_name,
      </if>
      <if test="oldName != null">
        old_name,
      </if>
      <if test="jgName != null">
        jg_name,
      </if>
      <if test="maritalStatus != null">
        marital_status,
      </if>
      <if test="imgUrl != null">
        img_url,
      </if>
      <if test="qq != null">
        qq,
      </if>
      <if test="wx != null">
        wx,
      </if>
      <if test="delDate != null">
        del_date,
      </if>
      <if test="mb1 != null">
        mb1,
      </if>
      <if test="mbda1 != null">
        mbda1,
      </if>
      <if test="mb2 != null">
        mb2,
      </if>
      <if test="mbda2 != null">
        mbda2,
      </if>
      <if test="mb3 != null">
        mb3,
      </if>
      <if test="mbda3 != null">
        mbda3,
      </if>
      <if test="dpno != null">
        dpno,
      </if>
      <if test="zDate != null">
        z_date,
      </if>
      <if test="dState != null">
        d_state,
      </if>
      <if test="errMsg != null">
        err_msg,
      </if>
      <if test="zNo != null">
        z_no,
      </if>
      <if test="dPoint != null">
        d_point,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="pnum != null">
        #{pnum,jdbcType=VARCHAR},
      </if>
      <if test="tel != null">
        #{tel,jdbcType=VARCHAR},
      </if>
      <if test="pwd != null">
        #{pwd,jdbcType=VARCHAR},
      </if>
      <if test="sex != null">
        #{sex,jdbcType=CHAR},
      </if>
      <if test="pid != null">
        #{pid,jdbcType=INTEGER},
      </if>
      <if test="addDate != null">
        #{addDate,jdbcType=TIMESTAMP},
      </if>
      <if test="daId != null">
        #{daId,jdbcType=VARCHAR},
      </if>
      <if test="workTime != null">
        #{workTime,jdbcType=TIMESTAMP},
      </if>
      <if test="mz != null">
        #{mz,jdbcType=VARCHAR},
      </if>
      <if test="zzmm != null">
        #{zzmm,jdbcType=VARCHAR},
      </if>
      <if test="school != null">
        #{school,jdbcType=VARCHAR},
      </if>
      <if test="graduationTime != null">
        #{graduationTime,jdbcType=TIMESTAMP},
      </if>
      <if test="major != null">
        #{major,jdbcType=VARCHAR},
      </if>
      <if test="degree != null">
        #{degree,jdbcType=VARCHAR},
      </if>
      <if test="domicile != null">
        #{domicile,jdbcType=VARCHAR},
      </if>
      <if test="adr != null">
        #{adr,jdbcType=VARCHAR},
      </if>
      <if test="gTel != null">
        #{gTel,jdbcType=VARCHAR},
      </if>
      <if test="email != null">
        #{email,jdbcType=VARCHAR},
      </if>
      <if test="household != null">
        #{household,jdbcType=VARCHAR},
      </if>
      <if test="domicilePlace != null">
        #{domicilePlace,jdbcType=VARCHAR},
      </if>
      <if test="bankId != null">
        #{bankId,jdbcType=VARCHAR},
      </if>
      <if test="bankNum != null">
        #{bankNum,jdbcType=VARCHAR},
      </if>
      <if test="technical != null">
        #{technical,jdbcType=VARCHAR},
      </if>
      <if test="teLevel != null">
        #{teLevel,jdbcType=VARCHAR},
      </if>
      <if test="job != null">
        #{job,jdbcType=VARCHAR},
      </if>
      <if test="getTime != null">
        #{getTime,jdbcType=TIMESTAMP},
      </if>
      <if test="partyName != null">
        #{partyName,jdbcType=VARCHAR},
      </if>
      <if test="birthDate != null">
        #{birthDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="workName != null">
        #{workName,jdbcType=VARCHAR},
      </if>
      <if test="placeName != null">
        #{placeName,jdbcType=VARCHAR},
      </if>
      <if test="partName != null">
        #{partName,jdbcType=VARCHAR},
      </if>
      <if test="oldName != null">
        #{oldName,jdbcType=VARCHAR},
      </if>
      <if test="jgName != null">
        #{jgName,jdbcType=VARCHAR},
      </if>
      <if test="maritalStatus != null">
        #{maritalStatus,jdbcType=VARCHAR},
      </if>
      <if test="imgUrl != null">
        #{imgUrl,jdbcType=VARCHAR},
      </if>
      <if test="qq != null">
        #{qq,jdbcType=VARCHAR},
      </if>
      <if test="wx != null">
        #{wx,jdbcType=VARCHAR},
      </if>
      <if test="delDate != null">
        #{delDate,jdbcType=TIMESTAMP},
      </if>
      <if test="mb1 != null">
        #{mb1,jdbcType=VARCHAR},
      </if>
      <if test="mbda1 != null">
        #{mbda1,jdbcType=VARCHAR},
      </if>
      <if test="mb2 != null">
        #{mb2,jdbcType=VARCHAR},
      </if>
      <if test="mbda2 != null">
        #{mbda2,jdbcType=VARCHAR},
      </if>
      <if test="mb3 != null">
        #{mb3,jdbcType=VARCHAR},
      </if>
      <if test="mbda3 != null">
        #{mbda3,jdbcType=VARCHAR},
      </if>
      <if test="dpno != null">
        #{dpno,jdbcType=VARCHAR},
      </if>
      <if test="zDate != null">
        #{zDate,jdbcType=TIMESTAMP},
      </if>
      <if test="dState != null">
        #{dState,jdbcType=VARCHAR},
      </if>
      <if test="errMsg != null">
        #{errMsg,jdbcType=VARCHAR},
      </if>
      <if test="zNo != null">
        #{zNo,jdbcType=VARCHAR},
      </if>
      <if test="dPoint != null">
        #{dPoint,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.i84.earnpoint.model.UserInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update user_info
    <set>
      <if test="name != null">
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="pnum != null">
        pnum = #{pnum,jdbcType=VARCHAR},
      </if>
      <if test="tel != null">
        tel = #{tel,jdbcType=VARCHAR},
      </if>
      <if test="pwd != null">
        pwd = #{pwd,jdbcType=VARCHAR},
      </if>
      <if test="sex != null">
        sex = #{sex,jdbcType=CHAR},
      </if>
      <if test="pid != null">
        pid = #{pid,jdbcType=INTEGER},
      </if>
      <if test="addDate != null">
        add_date = #{addDate,jdbcType=TIMESTAMP},
      </if>
      <if test="daId != null">
        da_id = #{daId,jdbcType=VARCHAR},
      </if>
      <if test="workTime != null">
        work_time = #{workTime,jdbcType=TIMESTAMP},
      </if>
      <if test="mz != null">
        mz = #{mz,jdbcType=VARCHAR},
      </if>
      <if test="zzmm != null">
        zzmm = #{zzmm,jdbcType=VARCHAR},
      </if>
      <if test="school != null">
        school = #{school,jdbcType=VARCHAR},
      </if>
      <if test="graduationTime != null">
        graduation_time = #{graduationTime,jdbcType=TIMESTAMP},
      </if>
      <if test="major != null">
        major = #{major,jdbcType=VARCHAR},
      </if>
      <if test="degree != null">
        degree = #{degree,jdbcType=VARCHAR},
      </if>
      <if test="domicile != null">
        domicile = #{domicile,jdbcType=VARCHAR},
      </if>
      <if test="adr != null">
        adr = #{adr,jdbcType=VARCHAR},
      </if>
      <if test="gTel != null">
        g_tel = #{gTel,jdbcType=VARCHAR},
      </if>
      <if test="email != null">
        email = #{email,jdbcType=VARCHAR},
      </if>
      <if test="household != null">
        household = #{household,jdbcType=VARCHAR},
      </if>
      <if test="domicilePlace != null">
        domicile_place = #{domicilePlace,jdbcType=VARCHAR},
      </if>
      <if test="bankId != null">
        bank_id = #{bankId,jdbcType=VARCHAR},
      </if>
      <if test="bankNum != null">
        bank_num = #{bankNum,jdbcType=VARCHAR},
      </if>
      <if test="technical != null">
        technical = #{technical,jdbcType=VARCHAR},
      </if>
      <if test="teLevel != null">
        te_level = #{teLevel,jdbcType=VARCHAR},
      </if>
      <if test="job != null">
        job = #{job,jdbcType=VARCHAR},
      </if>
      <if test="getTime != null">
        get_time = #{getTime,jdbcType=TIMESTAMP},
      </if>
      <if test="partyName != null">
        party_name = #{partyName,jdbcType=VARCHAR},
      </if>
      <if test="birthDate != null">
        birth_date = #{birthDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null">
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="workName != null">
        work_name = #{workName,jdbcType=VARCHAR},
      </if>
      <if test="placeName != null">
        place_name = #{placeName,jdbcType=VARCHAR},
      </if>
      <if test="partName != null">
        part_name = #{partName,jdbcType=VARCHAR},
      </if>
      <if test="oldName != null">
        old_name = #{oldName,jdbcType=VARCHAR},
      </if>
      <if test="jgName != null">
        jg_name = #{jgName,jdbcType=VARCHAR},
      </if>
      <if test="maritalStatus != null">
        marital_status = #{maritalStatus,jdbcType=VARCHAR},
      </if>
      <if test="imgUrl != null">
        img_url = #{imgUrl,jdbcType=VARCHAR},
      </if>
      <if test="qq != null">
        qq = #{qq,jdbcType=VARCHAR},
      </if>
      <if test="wx != null">
        wx = #{wx,jdbcType=VARCHAR},
      </if>
      <if test="delDate != null">
        del_date = #{delDate,jdbcType=TIMESTAMP},
      </if>
      <if test="mb1 != null">
        mb1 = #{mb1,jdbcType=VARCHAR},
      </if>
      <if test="mbda1 != null">
        mbda1 = #{mbda1,jdbcType=VARCHAR},
      </if>
      <if test="mb2 != null">
        mb2 = #{mb2,jdbcType=VARCHAR},
      </if>
      <if test="mbda2 != null">
        mbda2 = #{mbda2,jdbcType=VARCHAR},
      </if>
      <if test="mb3 != null">
        mb3 = #{mb3,jdbcType=VARCHAR},
      </if>
      <if test="mbda3 != null">
        mbda3 = #{mbda3,jdbcType=VARCHAR},
      </if>
      <if test="dpno != null">
        dpno = #{dpno,jdbcType=VARCHAR},
      </if>
      <if test="zDate != null">
        z_date = #{zDate,jdbcType=TIMESTAMP},
      </if>
      <if test="dState != null">
        d_state = #{dState,jdbcType=VARCHAR},
      </if>
      <if test="errMsg != null">
        err_msg = #{errMsg,jdbcType=VARCHAR},
      </if>
      <if test="zNo != null">
        z_no = #{zNo,jdbcType=VARCHAR},
      </if>
      <if test="dPoint != null">
        d_point = #{dPoint,jdbcType=VARCHAR},
      </if>
       <if test="zipCode != null">
        zip_code = #{zipCode,jdbcType=VARCHAR},
      </if>
      
       <if test="max_degree != null">
        max_degree = #{max_degree,jdbcType=VARCHAR},
      </if>
       <if test="max_graduation_time != null">
        max_graduation_time = #{max_graduation_time,jdbcType=VARCHAR},
      </if>
       <if test="max_major != null">
        max_major = #{max_major,jdbcType=VARCHAR},
      </if>
       <if test="max_school != null">
        max_school = #{max_school,jdbcType=VARCHAR},
      </if>
      
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.i84.earnpoint.model.UserInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update user_info
    set name = #{name,jdbcType=VARCHAR},
      pnum = #{pnum,jdbcType=VARCHAR},
      tel = #{tel,jdbcType=VARCHAR},
      pwd = #{pwd,jdbcType=VARCHAR},
      sex = #{sex,jdbcType=CHAR},
      pid = #{pid,jdbcType=INTEGER},
      add_date = #{addDate,jdbcType=TIMESTAMP},
      da_id = #{daId,jdbcType=VARCHAR},
      work_time = #{workTime,jdbcType=TIMESTAMP},
      mz = #{mz,jdbcType=VARCHAR},
      zzmm = #{zzmm,jdbcType=VARCHAR},
      school = #{school,jdbcType=VARCHAR},
      graduation_time = #{graduationTime,jdbcType=TIMESTAMP},
      major = #{major,jdbcType=VARCHAR},
      degree = #{degree,jdbcType=VARCHAR},
      domicile = #{domicile,jdbcType=VARCHAR},
      adr = #{adr,jdbcType=VARCHAR},
      g_tel = #{gTel,jdbcType=VARCHAR},
      email = #{email,jdbcType=VARCHAR},
      household = #{household,jdbcType=VARCHAR},
      domicile_place = #{domicilePlace,jdbcType=VARCHAR},
      bank_id = #{bankId,jdbcType=VARCHAR},
      bank_num = #{bankNum,jdbcType=VARCHAR},
      technical = #{technical,jdbcType=VARCHAR},
      te_level = #{teLevel,jdbcType=VARCHAR},
      job = #{job,jdbcType=VARCHAR},
      get_time = #{getTime,jdbcType=TIMESTAMP},
      party_name = #{partyName,jdbcType=VARCHAR},
      birth_date = #{birthDate,jdbcType=TIMESTAMP},
      remark = #{remark,jdbcType=VARCHAR},
      work_name = #{workName,jdbcType=VARCHAR},
      place_name = #{placeName,jdbcType=VARCHAR},
      part_name = #{partName,jdbcType=VARCHAR},
      old_name = #{oldName,jdbcType=VARCHAR},
      jg_name = #{jgName,jdbcType=VARCHAR},
      marital_status = #{maritalStatus,jdbcType=VARCHAR},
      img_url = #{imgUrl,jdbcType=VARCHAR},
      qq = #{qq,jdbcType=VARCHAR},
      wx = #{wx,jdbcType=VARCHAR},
      del_date = #{delDate,jdbcType=TIMESTAMP},
      mb1 = #{mb1,jdbcType=VARCHAR},
      mbda1 = #{mbda1,jdbcType=VARCHAR},
      mb2 = #{mb2,jdbcType=VARCHAR},
      mbda2 = #{mbda2,jdbcType=VARCHAR},
      mb3 = #{mb3,jdbcType=VARCHAR},
      mbda3 = #{mbda3,jdbcType=VARCHAR},
      dpno = #{dpno,jdbcType=VARCHAR},
      z_date = #{zDate,jdbcType=TIMESTAMP},
      d_state = #{dState,jdbcType=VARCHAR},
      err_msg = #{errMsg,jdbcType=VARCHAR},
      z_no = #{zNo,jdbcType=VARCHAR},
      d_point = #{dPoint,jdbcType=VARCHAR},
      max_degree = #{max_degree,jdbcType=VARCHAR},
      max_graduation_time = #{max_graduation_time,jdbcType=VARCHAR},
      max_major = #{max_major,jdbcType=VARCHAR},
      max_school = #{max_school,jdbcType=VARCHAR}
        
    where id = #{id,jdbcType=INTEGER}
  </update>
 


   <select id="selectYgList" parameterType="java.util.HashMap" resultType="java.util.HashMap" >
  
		    select 
		     DISTINCT
        d.startdate,d.enddate,
		c.c_code as zzjgdm,
		c.name as qymc,
		 case when c.pro_id=0 then '私企' 
		 when c.pro_id=1 then '国企'
		 when c.pro_id=2 then '外企'
		 when c.pro_id=3 then '合资'
		 else '其它' end qyxz,
		 a.id,
		 a.pnum as sfz,
		 a.name as xm,
		 a.birth_date as csny,
		 a.sex as xb,
		 b.employment_type_id as ygxs,
		 case when b.sstate=0 then '待审核' when b.sstate=1  then '审核通过' when b.sstate=2  then '审核未通过' else '其它' end   as shzt,

		 b.remsg as shyj
		   from user_info a
		INNER  JOIN hy_business_info b on a.id=b.user_id
		INNER JOIN enterprise_info c on c.id=b.enterprise_id
		LEFT JOIN (select   info.userid,info.startdate,info.enddate from agreement_info info where  info.del_date is null order by enddate  desc) d on d.userid=a.id
		
		where  a.del_date is null and b.del_date is null and c.del_date is null  
    <if test="zzjgdm !=null and zzjgdm !=''">
     and c.c_code like CONCAT('%',#{zzjgdm},'%')  
    </if>
    <if test="qymc !=null and qymc !=''">
     and c.name like CONCAT('%',#{qymc},'%')
    </if>
     <if test="xb !=null and xb !=''">
     and a.sex=#{xb,jdbcType=VARCHAR}
    </if>
     <if test="startBirthday !=null and startBirthday !=''">
	        <![CDATA[ AND a.birth_date >=  date_format(#{startBirthday},'%Y-%m-%d')  ]]>     
	 </if>
	 <if test="endBirthday !=null and endBirthday !=''">
	        <![CDATA[AND a.birth_date <=  date_format(#{endBirthday},'%Y-%m-%d')  ]]>     
	  </if>
	 <if test="shyj !=null and shyj !=''">
	  and b.remsg like CONCAT('%',#{shyj},'%')
	  </if>
	  <if test="ygxs !=null and ygxs !=''">
	  and b.employment_type_id like CONCAT('%',#{ygxs},'%')
	  </if>
	  <if test="xm !=null and xm !=''">
	    and a.name like CONCAT('%',#{xm},'%')
	    </if>
	     <if test="sfz !=null and sfz !=''">
	      and a.pnum like CONCAT('%',#{sfz},'%')
	     </if>
	     <if test="shzt !=null and shzt !=''">
	      and b.sstate =#{shzt,jdbcType=INTEGER}
	     </if>
	    
     </select>
     
      <select id="selectYgList2" parameterType="java.util.HashMap" resultType="java.util.HashMap" >
		 
select 
     a.name as xm,
    a.sex as xb,
    a.pnum as sfz,
     a.id as uid
  from user_info a
  INNER JOIN hy_business_info b on b.user_id=a.id
	where   b.del_date is null  and a.del_date is null
    <if test="qyid !=null and qyid !=''">
     and b.enterprise_id =#{qyid,jdbcType=INTEGER}
    </if>
    
      <if test="sfz !=null and sfz !=''">
     and c.pnum=#{xb,jdbcType=VARCHAR}
    </if>
     </select>
     
      <select id="selectYgList3" parameterType="java.util.HashMap" resultType="java.util.HashMap" >
    select 
    a.name as xm,
    a.pnum as sfz,
    a.id as uid
   from user_info a 
   INNER JOIN zc_activity_get b on b.uid=a.id
   INNER JOIN zc_activity_info c on c.id=b.activity_id
   where a.del_date is null and b.del_date is null and c.del_date is null
    <if test="activityId !=null and activityId !=''"><!-- 活动id -->
   and c.id=#{activityId,jdbcType=INTEGER}
   </if>
    <if test=" businessId !=null and businessId !=''"><!-- 活动编号-->
   and c.business_id=#{businessId,jdbcType=VARCHAR}
   </if>
    <if test=" pnum !=null and pnum !=''"><!-- 身份证-->
   and a.pnum=#{pnum,jdbcType=VARCHAR}
   </if>
     </select>
  
   <select id="selectYg" parameterType="com.i84.earnpoint.model.UserInfo" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from user_info where del_date is null
    <if test="pnum!=null and pnum!=''">
     and pnum=#{pnum,jdbcType=VARCHAR}
    </if>
    <!--  
    <if test="id!=null and id!=''">
    and id=#{id,jdbcType=INTEGER}
    </if>
    -->
    limit 1
  </select>
  
   <select id="selectByDpno" parameterType="com.i84.earnpoint.model.UserInfo" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from user_info where del_date is null
    <if test="dpno!=null and dpno!=''">
     and dpno=#{dpno,jdbcType=VARCHAR}
    </if>
    <!--  
    <if test="id!=null and id!=''">
    and id=#{id,jdbcType=INTEGER}
    </if>
    -->
    limit 1
  </select>
  
  
     <select id="selectYgByclass" parameterType="com.i84.earnpoint.model.UserInfo" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from user_info where del_date is null
    <if test="pnum!=null and pnum!=''">
     and pnum=#{pnum,jdbcType=VARCHAR}
    </if>
    <!--  
    <if test="id!=null and id!=''">
    and id=#{id,jdbcType=INTEGER}
    </if>
    -->
    limit 1
  </select>
  
  <select id="getYgMsg" parameterType="java.util.HashMap" resultType="java.util.HashMap">
  
select 
case when c.pro_id=0 then '私企' 
 when c.pro_id=1 then '国企'
 when c.pro_id=2 then '外企'
 when c.pro_id=3 then '合资'
 else '其它' end qyxz,
 c.id as enterpriseId,
 c.c_code as zzjgdm,
 c.name as qymc,
 a.work_name as dw,
 a.pnum as sfz,
  a.name as xm,
 a.birth_date as csny,
 a.sex as xb,
a.da_id as xdaszd,
work_time as cjgzsj,
a.mz,
b.employment_type_id as ygxs,
a.zzmm,
a.school as byyx,
a.graduation_time as bysj,
a.major as sxzy,
a.degree as whcd,
a.domicile as hjd,
a.adr as lxdz,
a.g_tel as gddh,
a.tel as sjhm,
a.email as dzyx,
a.household as hjxz,
a.domicile_place as hjszd,
a.bank_id as khyh,
a.bank_num as yhzh,
a.technical as jszc,
a.te_level as zydj,
a.job as zyzg,
a.get_time as hqsj,
case when b.sstate=0 then '待审核' when b.sstate=1  then '审核通过' when b.sstate=2  then '审核未通过' else '其它' end   as shzt,
b.sstate,
b.remsg as shyj, 
a.id,
a.id as uid
   from user_info a
INNER  JOIN hy_business_info b on a.id=b.user_id
left JOIN enterprise_info c on c.id=b.enterprise_id
where a.del_date is null and  b.del_date is null
<if test="id !=null and id !=''">
     and a.id=#{id,jdbcType=VARCHAR}
    </if>  
<if test="zzjgdm !=null and zzjgdm !=''">
     and c.c_code like CONCAT('%',#{zzjgdm},'%')  
    </if>
    <if test="qymc !=null and qymc !=''">
     and c.name like CONCAT('%',#{qymc},'%')
    </if>
     <if test="xb !=null and xb !=''">
     and a.sex=#{xb,jdbcType=VARCHAR}
    </if>
     <if test="sfz !=null and sfz !=''">
     and a.pnum=#{sfz,jdbcType=VARCHAR}
    </if>

  </select>
  
  
  
  
  
  <select id="selectUserInfoBySelective" resultMap="BaseResultMap" parameterType="com.i84.earnpoint.model.UserInfo">
   select
   <include refid="Base_Column_List"/>
   from user_info where dpno!='null' and dpno!=''
   <if test="id != null">
      and id=#{id,jdbcType=INTEGER} 
   </if>
   <if test="name != null">
       and  name like #{name,jdbcType=VARCHAR} 
      </if>
    <if test="pnum != null">
       and pnum like #{pnum,jdbcType=VARCHAR} 
      </if>
      <if test="tel != null">
       and tel = #{tel,jdbcType=VARCHAR} 
      </if>
      <if test="pwd != null">
       and pwd = #{pwd,jdbcType=VARCHAR}
      </if>
      <if test="sex != null">
        and sex = #{sex,jdbcType=CHAR} 
      </if>
      <if test="pid != null">
       and pid = #{pid,jdbcType=INTEGER} 
      </if>
      <if test="addDate != null">
        and add_date = #{addDate,jdbcType=TIMESTAMP} 
      </if>
      <if test="daId != null">
        and da_id = #{daId,jdbcType=VARCHAR}
      </if>
      <if test="workTime != null">
        and work_time = #{workTime,jdbcType=TIMESTAMP}
      </if>
      <if test="mz != null">
       and mz = #{mz,jdbcType=VARCHAR}
      </if>
      <if test="zzmm != null">
       and zzmm = #{zzmm,jdbcType=VARCHAR}
      </if>
      <if test="school != null">
        and school like #{school,jdbcType=VARCHAR}
      </if>
      <if test="graduationTime != null">
        and graduation_time = #{graduationTime,jdbcType=TIMESTAMP}
      </if>
      <if test="major != null">
       and major like #{major,jdbcType=VARCHAR} 
      </if>
      <if test="degree != null">
        and degree = #{degree,jdbcType=VARCHAR}
      </if>
      <if test="domicile != null">
        and domicile = #{domicile,jdbcType=VARCHAR}
      </if>
      <if test="adr != null">
        and adr = #{adr,jdbcType=VARCHAR}
      </if>
      <if test="gTel != null">
        and g_tel = #{gTel,jdbcType=VARCHAR}
      </if>
      <if test="email != null">
        and email = #{email,jdbcType=VARCHAR}
      </if>
      <if test="household != null">
        and household = #{household,jdbcType=VARCHAR}
      </if>
      <if test="domicilePlace != null">
        and domicile_place = #{domicilePlace,jdbcType=VARCHAR}
      </if>
      <if test="bankId != null">
        and bank_id = #{bankId,jdbcType=INTEGER} 
      </if>
      <if test="bankNum != null">
        and bank_num = #{bankNum,jdbcType=VARCHAR} 
      </if>
      <if test="technical != null">
        and technical = #{technical,jdbcType=VARCHAR} 
      </if>
      <if test="teLevel != null">
        and te_level = #{teLevel,jdbcType=VARCHAR} 
      </if>
      <if test="job != null">
        and job = #{job,jdbcType=VARCHAR} 
      </if>
      <if test="getTime != null">
        and get_time = #{getTime,jdbcType=TIMESTAMP} 
      </if>
      <if test="partyName != null">
        and party_name = #{partyName,jdbcType=VARCHAR}
      </if>
      <if test="birthDate != null">
       and birth_date = #{birthDate,jdbcType=TIMESTAMP}
      </if>
      <if test="remark != null">
       and remark = #{remark,jdbcType=VARCHAR} 
      </if>
      <if test="workName != null">
        and work_name = #{workName,jdbcType=VARCHAR}
      </if>
      <if test="placeName != null">
       and place_name = #{placeName,jdbcType=VARCHAR}
      </if>
      <if test="dpno != null">
      and dpno like #{dpno,jdbcType=VARCHAR}
      </if>
  </select>
  
  <select id="selectUserInfoBySelective1" resultMap="BaseResultMap" parameterType="com.i84.earnpoint.model.UserInfo">
   select
   <include refid="Base_Column_List"/>
   from user_info where 1=1
   <if test="id!=null">
     AND id=#{id,jdbcType=INTEGER} 
   </if>
   <if test="name != null">
       and  name like #{name,jdbcType=VARCHAR} 
</if>
    <if test="pnum != null">
       and pnum like #{pnum,jdbcType=VARCHAR} 
      </if>
      <if test="tel != null">
       and tel = #{tel,jdbcType=VARCHAR} 
      </if>
      <if test="pwd != null">
       and pwd = #{pwd,jdbcType=VARCHAR}
      </if>
      <if test="sex != null">
        and sex = #{sex,jdbcType=CHAR} 
      </if>
      <if test="pid != null">
       and pid = #{pid,jdbcType=INTEGER} 
      </if>
      <if test="addDate != null">
        and add_date = #{addDate,jdbcType=TIMESTAMP} 
      </if>
      <if test="daId != null">
        and da_id = #{daId,jdbcType=VARCHAR}
      </if>
      <if test="workTime != null">
        and work_time = #{workTime,jdbcType=TIMESTAMP}
      </if>
      <if test="mz != null">
       and mz = #{mz,jdbcType=VARCHAR}
      </if>
      <if test="zzmm != null">
       and zzmm = #{zzmm,jdbcType=VARCHAR}
      </if>
      <if test="school != null">
        and school like #{school,jdbcType=VARCHAR}
      </if>
      <if test="graduationTime != null">
        and graduation_time = #{graduationTime,jdbcType=TIMESTAMP}
      </if>
      <if test="major != null">
       and major like #{major,jdbcType=VARCHAR} 
      </if>
      <if test="degree != null">
        and degree = #{degree,jdbcType=VARCHAR}
      </if>
      <if test="domicile != null">
        and domicile = #{domicile,jdbcType=VARCHAR}
      </if>
      <if test="adr != null">
        and adr = #{adr,jdbcType=VARCHAR}
      </if>
      <if test="gTel != null">
        and g_tel = #{gTel,jdbcType=VARCHAR}
      </if>
      <if test="email != null">
        and email = #{email,jdbcType=VARCHAR}
      </if>
      <if test="household != null">
        and household = #{household,jdbcType=VARCHAR}
      </if>
      <if test="domicilePlace != null">
        and domicile_place = #{domicilePlace,jdbcType=VARCHAR}
      </if>
      <if test="bankId != null">
        and bank_id = #{bankId,jdbcType=INTEGER} 
      </if>
      <if test="bankNum != null">
        and bank_num = #{bankNum,jdbcType=VARCHAR} 
      </if>
      <if test="technical != null">
        and technical = #{technical,jdbcType=VARCHAR} 
      </if>
      <if test="teLevel != null">
        and te_level = #{teLevel,jdbcType=VARCHAR} 
      </if>
      <if test="job != null">
        and job = #{job,jdbcType=VARCHAR} 
      </if>
      <if test="getTime != null">
        and get_time = #{getTime,jdbcType=TIMESTAMP} 
      </if>
      <if test="partyName != null">
        and party_name = #{partyName,jdbcType=VARCHAR}
      </if>
      <if test="birthDate != null">
       and birth_date = #{birthDate,jdbcType=TIMESTAMP}
      </if>
      <if test="remark != null">
       and remark = #{remark,jdbcType=VARCHAR} 
      </if>
      <if test="workName != null">
        and work_name = #{workName,jdbcType=VARCHAR}
      </if>
      <if test="placeName != null">
       and place_name = #{placeName,jdbcType=VARCHAR}
      </if>
      <if test="dpno != null">
      and dpno like #{dpno,jdbcType=VARCHAR}
      </if>
      
  </select>
  
 <select id="queryUserList" parameterType="java.util.Map" resultType="java.util.Map">
   SELECT   UI.ID,
            UI.NAME,
		    UI.PNUM,
		    UI.SEX,
			case when UEI.ID is null  then '否' else '是' end as ZJ,  
			UPI.ID AS PY,
			MFI.ID AS MID,
			MFI.MSG_NAME,
			UMI.IS_STATE,
			UMI.SMSG
    FROM USER_INFO UI 
		LEFT JOIN  USER_EXPERT_INFO UEI ON UI.ID = UEI.UID
		LEFT JOIN  USER_PARTY_INFO UPI ON UI.ID = UPI.UID
		LEFT JOIN  MSG_FROM_INFO MFI ON UI.PNUM = MFI.PNUM
		LEFT JOIN  USER_MG_INFO UMI ON UI.ID = UMI.UID
    where UI.DEL_DATE IS NULL
    <if test="MSG_NAME != null">
      and MFI.MSG_NAME = #{MSG_NAME,jdbcType=VARCHAR}
    </if>
    <if test="IS_STATE != null">
      and MFI.IS_STATE = #{IS_STATE,jdbcType=INTEGER}
    </if>
    <if test="PNO != null">
      and UI.PNO = #{PNO,jdbcType=VARCHAR}
    </if>
    <if test="NAME != null">
      and UI.NAME like #{NAME,jdbcType=VARCHAR}
    </if>
    <if test="PNUM != null">
      and UI.PNUM = #{PNUM,jdbcType=VARCHAR}
    </if>
    <if test="KEY != null">
      and (UI.PNUM = #{KEY,jdbcType=VARCHAR} or UI.NAME like #{KEY,jdbcType=VARCHAR})
    </if>
  </select>
  <insert id="insertReturnKey" parameterType="com.i84.earnpoint.model.UserInfo" useGeneratedKeys="true" keyProperty="id">
	  insert into user_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="pnum != null">
        pnum,
      </if>
      <if test="tel != null">
        tel,
      </if>
      <if test="pwd != null">
        pwd,
      </if>
      <if test="sex != null">
        sex,
      </if>
      <if test="pid != null">
        pid,
      </if>
      <if test="addDate != null">
        add_date,
      </if>
      <if test="daId != null">
        da_id,
      </if>
      <if test="workTime != null">
        work_time,
      </if>
      <if test="mz != null">
        mz,
      </if>
      <if test="zzmm != null">
        zzmm,
      </if>
      <if test="school != null">
        school,
      </if>
      <if test="graduationTime != null">
        graduation_time,
      </if>
      <if test="major != null">
        major,
      </if>
      <if test="degree != null">
        degree,
      </if>
      <if test="domicile != null">
        domicile,
      </if>
      <if test="adr != null">
        adr,
      </if>
      <if test="gTel != null">
        g_tel,
      </if>
      <if test="email != null">
        email,
      </if>
      <if test="household != null">
        household,
      </if>
      <if test="domicilePlace != null">
        domicile_place,
      </if>
      <if test="bankId != null">
        bank_id,
      </if>
      <if test="bankNum != null">
        bank_num,
      </if>
      <if test="technical != null">
        technical,
      </if>
      <if test="teLevel != null">
        te_level,
      </if>
      <if test="job != null">
        job,
      </if>
      <if test="getTime != null">
        get_time,
      </if>
      <if test="partyName != null">
        party_name,
      </if>
      <if test="birthDate != null">
        birth_date,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="workName != null">
        work_name,
      </if>
      <if test="placeName != null">
        place_name,
      </if>
      <if test="partName != null">
        part_name,
      </if>
      <if test="oldName != null">
        old_name,
      </if>
      <if test="jgName != null">
        jg_name,
      </if>
      <if test="maritalStatus != null">
        marital_status,
      </if>
      <if test="imgUrl != null">
        img_url,
      </if>
      <if test="qq != null">
        qq,
      </if>
      <if test="wx != null">
        wx,
      </if>
       <if test=" dpno != null">
        dpno,
      </if>
      
      <if test=" max_degree != null">
        max_degree,
      </if>
      <if test=" max_graduation_time != null">
        max_graduation_time,
      </if>
      <if test=" max_major != null">
        max_major,
      </if>
      <if test=" max_school != null">
        max_school,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="pnum != null">
        #{pnum,jdbcType=VARCHAR},
      </if>
      <if test="tel != null">
        #{tel,jdbcType=VARCHAR},
      </if>
      <if test="pwd != null">
        #{pwd,jdbcType=VARCHAR},
      </if>
      <if test="sex != null">
        #{sex,jdbcType=CHAR},
      </if>
      <if test="pid != null">
        #{pid,jdbcType=INTEGER},
      </if>
      <if test="addDate != null">
        #{addDate,jdbcType=TIMESTAMP},
      </if>
      <if test="daId != null">
        #{daId,jdbcType=VARCHAR},
      </if>
      <if test="workTime != null">
        #{workTime,jdbcType=TIMESTAMP},
      </if>
      <if test="mz != null">
        #{mz,jdbcType=VARCHAR},
      </if>
      <if test="zzmm != null">
        #{zzmm,jdbcType=VARCHAR},
      </if>
      <if test="school != null">
        #{school,jdbcType=VARCHAR},
      </if>
      <if test="graduationTime != null">
        #{graduationTime,jdbcType=TIMESTAMP},
      </if>
      <if test="major != null">
        #{major,jdbcType=VARCHAR},
      </if>
      <if test="degree != null">
        #{degree,jdbcType=VARCHAR},
      </if>
      <if test="domicile != null">
        #{domicile,jdbcType=VARCHAR},
      </if>
      <if test="adr != null">
        #{adr,jdbcType=VARCHAR},
      </if>
      <if test="gTel != null">
        #{gTel,jdbcType=VARCHAR},
      </if>
      <if test="email != null">
        #{email,jdbcType=VARCHAR},
      </if>
      <if test="household != null">
        #{household,jdbcType=VARCHAR},
      </if>
      <if test="domicilePlace != null">
        #{domicilePlace,jdbcType=VARCHAR},
      </if>
      <if test="bankId != null">
        #{bankId,jdbcType=VARCHAR},
      </if>
      <if test="bankNum != null">
        #{bankNum,jdbcType=VARCHAR},
      </if>
      <if test="technical != null">
        #{technical,jdbcType=VARCHAR},
      </if>
      <if test="teLevel != null">
        #{teLevel,jdbcType=VARCHAR},
      </if>
      <if test="job != null">
        #{job,jdbcType=VARCHAR},
      </if>
      <if test="getTime != null">
        #{getTime,jdbcType=TIMESTAMP},
      </if>
      <if test="partyName != null">
        #{partyName,jdbcType=VARCHAR},
      </if>
      <if test="birthDate != null">
        #{birthDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="workName != null">
        #{workName,jdbcType=VARCHAR},
      </if>
      <if test="placeName != null">
        #{placeName,jdbcType=VARCHAR},
      </if>
      <if test="partName != null">
        #{partName,jdbcType=VARCHAR},
      </if>
      <if test="oldName != null">
        #{oldName,jdbcType=VARCHAR},
      </if>
      <if test="jgName != null">
        #{jgName,jdbcType=VARCHAR},
      </if>
      <if test="maritalStatus != null">
        #{maritalStatus,jdbcType=VARCHAR},
      </if>
      <if test="imgUrl != null">
        #{imgUrl,jdbcType=VARCHAR},
      </if>
      <if test="qq != null">
        #{qq,jdbcType=VARCHAR},
      </if>
      <if test="wx != null">
        #{wx,jdbcType=VARCHAR},
      </if>
      <if test=" dpno != null">
       #{dpno,jdbcType=VARCHAR},
      </if>
      
      
       <if test=" max_degree != null">
       #{max_degree,jdbcType=VARCHAR},
      </if>
      <if test=" max_graduation_time != null">
        #{max_graduation_time,jdbcType=TIMESTAMP},
      </if>
      <if test=" max_major != null">
      #{max_major,jdbcType=VARCHAR},
      </if>
      <if test=" max_school != null">
       #{max_school,jdbcType=VARCHAR},
      </if>
    </trim>
	</insert>
	 
	 <insert id="insertUserInfoByKey" parameterType="com.i84.earnpoint.model.UserInfo" useGeneratedKeys="true" keyProperty="id">
    insert into user_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="name != null">
        name,
      </if>
      <if test="pnum != null">
        pnum,
      </if>
      <if test="tel != null">
        tel,
      </if>
      <if test="pwd != null">
        pwd,
      </if>
      <if test="sex != null">
        sex,
      </if>
      <if test="pid != null">
        pid,
      </if>
      <if test="addDate != null">
        add_date,
      </if>
      <if test="daId != null">
        da_id,
      </if>
      <if test="workTime != null">
        work_time,
      </if>
      <if test="mz != null">
        mz,
      </if>
      <if test="zzmm != null">
        zzmm,
      </if>
      <if test="school != null">
        school,
      </if>
      <if test="graduationTime != null">
        graduation_time,
      </if>
      <if test="major != null">
        major,
      </if>
      <if test="degree != null">
        degree,
      </if>
      <if test="domicile != null">
        domicile,
      </if>
      <if test="adr != null">
        adr,
      </if>
      <if test="gTel != null">
        g_tel,
      </if>
      <if test="email != null">
        email,
      </if>
      <if test="household != null">
        household,
      </if>
      <if test="domicilePlace != null">
        domicile_place,
      </if>
      <if test="bankId != null">
        bank_id,
      </if>
      <if test="bankNum != null">
        bank_num,
      </if>
      <if test="technical != null">
        technical,
      </if>
      <if test="teLevel != null">
        te_level,
      </if>
      <if test="job != null">
        job,
      </if>
      <if test="getTime != null">
        get_time,
      </if>
      <if test="partyName != null">
        party_name,
      </if>
      <if test="birthDate != null">
        birth_date,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="workName != null">
        work_name,
      </if>
      <if test="placeName != null">
        place_name,
      </if>
      <if test="partName != null">
        part_name,
      </if>
      <if test="oldName != null">
        old_name,
      </if>
      <if test="jgName != null">
        jg_name,
      </if>
      <if test="maritalStatus != null">
        marital_status,
      </if>
      <if test="imgUrl != null">
        img_url,
      </if>
      <if test="qq != null">
        qq,
      </if>
      <if test="wx != null">
        wx,
      </if>
      <if test="delDate != null">
        del_date,
      </if>
      <if test="mb1 != null">
        mb1,
      </if>
      <if test="mbda1 != null">
        mbda1,
      </if>
      <if test="mb2 != null">
        mb2,
      </if>
      <if test="mbda2 != null">
        mbda2,
      </if>
      <if test="mb3 != null">
        mb3,
      </if>
      <if test="mbda3 != null">
        mbda3,
      </if>
      <if test="dpno != null">
        dpno,
      </if>
      <if test="zDate != null">
        z_date,
      </if>
      <if test="dState != null">
        d_state,
      </if>
      <if test="errMsg != null">
        err_msg,
      </if>
      <if test="zNo != null">
        z_no,
      </if>
      <if test="dPoint != null">
        d_point,
      </if>
      <if test="zipCode != null">
        zip_code,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="name != null">
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="pnum != null">
        #{pnum,jdbcType=VARCHAR},
      </if>
      <if test="tel != null">
        #{tel,jdbcType=VARCHAR},
      </if>
      <if test="pwd != null">
        #{pwd,jdbcType=VARCHAR},
      </if>
      <if test="sex != null">
        #{sex,jdbcType=CHAR},
      </if>
      <if test="pid != null">
        #{pid,jdbcType=INTEGER},
      </if>
      <if test="addDate != null">
        #{addDate,jdbcType=TIMESTAMP},
      </if>
      <if test="daId != null">
        #{daId,jdbcType=VARCHAR},
      </if>
      <if test="workTime != null">
        #{workTime,jdbcType=TIMESTAMP},
      </if>
      <if test="mz != null">
        #{mz,jdbcType=VARCHAR},
      </if>
      <if test="zzmm != null">
        #{zzmm,jdbcType=VARCHAR},
      </if>
      <if test="school != null">
        #{school,jdbcType=VARCHAR},
      </if>
      <if test="graduationTime != null">
        #{graduationTime,jdbcType=TIMESTAMP},
      </if>
      <if test="major != null">
        #{major,jdbcType=VARCHAR},
      </if>
      <if test="degree != null">
        #{degree,jdbcType=VARCHAR},
      </if>
      <if test="domicile != null">
        #{domicile,jdbcType=VARCHAR},
      </if>
      <if test="adr != null">
        #{adr,jdbcType=VARCHAR},
      </if>
      <if test="gTel != null">
        #{gTel,jdbcType=VARCHAR},
      </if>
      <if test="email != null">
        #{email,jdbcType=VARCHAR},
      </if>
      <if test="household != null">
        #{household,jdbcType=VARCHAR},
      </if>
      <if test="domicilePlace != null">
        #{domicilePlace,jdbcType=VARCHAR},
      </if>
      <if test="bankId != null">
        #{bankId,jdbcType=VARCHAR},
      </if>
      <if test="bankNum != null">
        #{bankNum,jdbcType=VARCHAR},
      </if>
      <if test="technical != null">
        #{technical,jdbcType=VARCHAR},
      </if>
      <if test="teLevel != null">
        #{teLevel,jdbcType=VARCHAR},
      </if>
      <if test="job != null">
        #{job,jdbcType=VARCHAR},
      </if>
      <if test="getTime != null">
        #{getTime,jdbcType=TIMESTAMP},
      </if>
      <if test="partyName != null">
        #{partyName,jdbcType=VARCHAR},
      </if>
      <if test="birthDate != null">
        #{birthDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="workName != null">
        #{workName,jdbcType=VARCHAR},
      </if>
      <if test="placeName != null">
        #{placeName,jdbcType=VARCHAR},
      </if>
      <if test="partName != null">
        #{partName,jdbcType=VARCHAR},
      </if>
      <if test="oldName != null">
        #{oldName,jdbcType=VARCHAR},
      </if>
      <if test="jgName != null">
        #{jgName,jdbcType=VARCHAR},
      </if>
      <if test="maritalStatus != null">
        #{maritalStatus,jdbcType=VARCHAR},
      </if>
      <if test="imgUrl != null">
        #{imgUrl,jdbcType=VARCHAR},
      </if>
      <if test="qq != null">
        #{qq,jdbcType=VARCHAR},
      </if>
      <if test="wx != null">
        #{wx,jdbcType=VARCHAR},
      </if>
      <if test="delDate != null">
        #{delDate,jdbcType=TIMESTAMP},
      </if>
      <if test="mb1 != null">
        #{mb1,jdbcType=VARCHAR},
      </if>
      <if test="mbda1 != null">
        #{mbda1,jdbcType=VARCHAR},
      </if>
      <if test="mb2 != null">
        #{mb2,jdbcType=VARCHAR},
      </if>
      <if test="mbda2 != null">
        #{mbda2,jdbcType=VARCHAR},
      </if>
      <if test="mb3 != null">
        #{mb3,jdbcType=VARCHAR},
      </if>
      <if test="mbda3 != null">
        #{mbda3,jdbcType=VARCHAR},
      </if>
      <if test="dpno != null">
        #{dpno,jdbcType=VARCHAR},
      </if>
      <if test="zDate != null">
        #{zDate,jdbcType=TIMESTAMP},
      </if>
      <if test="dState != null">
        #{dState,jdbcType=VARCHAR},
      </if>
      <if test="errMsg != null">
        #{errMsg,jdbcType=VARCHAR},
      </if>
      <if test="zNo != null">
        #{zNo,jdbcType=VARCHAR},
      </if>
      <if test="dPoint != null">
        #{dPoint,jdbcType=VARCHAR},
      </if>
      <if test="zipCode != null">
        #{zipCode,jdbcType=VARCHAR},
      </if>
      
    </trim>
  </insert>
  
	 <select id="qryUseBaseMs" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	 	select    u.id ,
		   u.name,
		   u.pnum,
		   u.tel,
		   u.pwd,
		   u.sex,
		   u.pid,
		   u.add_date,
		   u.da_id,
		   u.work_time,
		   u.mz ,
		   u.zzmm,
		   u.school,
		   u.graduation_time,
		   u.major,
		   u.degree,
		   u.domicile,
		   u.adr,
		   u.g_tel,
		   u.email,
		   u.household ,
		   u.domicile_place,
		   u.bank_id ,
		   u.bank_num,
		   u.technical,
		   u.te_level,
		   u.job,
		   u.get_time,
		   u.party_name,
		   u.birth_date ,
		   u.remark,
		   u.work_name,
		   u.place_name ,
		   u.part_name,
		   u.old_name,
		   u.jg_name ,
		   u.marital_status,
		   u.img_url,
		   u.qq,
		   u.wx,
		   u.max_school,
		   u.max_major,
		   u.max_graduation_time,
		   u.max_degree,
		   m.*,m.id as mid,
		   t.userName as 'stuffname',
		   u.dpno
    from user_info u left join user_mg_info m on u.id = m.uid
    left join t_user t on u.pid=t.userId
	 	where u.id = #{id,jdbcType=INTEGER} 
	 	<if test="mid!=null and mid!=''">
	 	and m.id=#{mid,jdbcType=INTEGER} 
	 	
	 	</if>
	 </select>
	 
	 <update id="resetUserInfoPwd" >
	 	update user_info set pwd = #{pwd} where id=#{id} 
	 </update>
	 <select id="getUserByPnum" resultMap="BaseResultMap" parameterType="java.lang.String" >
	    select 
	    <include refid="Base_Column_List" />
	    from user_info 
	    where pnum = #{pnum,jdbcType=VARCHAR}
	 </select>
	 <select id="countdyslByyear" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	 select name,count(1) 'num' from (
	select 	
		YEAR(a.add_date) 'name'	
 		 from user_info a LEFT JOIN archives_base_info b ON a.dpno=b.p_no
 		where a.del_date is null 
 		AND b.del_date is NULL 
 		AND a.zzmm like '党员' 
 		And b.in_date>b.out_date
 		 <if test="t_start != '' ">
              AND a.add_date  &gt;=  #{t_start}
        </if>
        <if test=" t_end != ''  ">
              AND  a.add_date  &lt;=  #{t_end}
        </if>
 		
	) as t1 group by t1.name
	 </select>
	 	 <select id="countdyslBymonth" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	 select t.month 'name',num from temp_month t LEFT JOIN (
	select name,count(1) 'num' from (
	select 
		month(a.add_date) 'name'
 		 from user_info a LEFT JOIN archives_base_info b ON a.dpno=b.p_no
 		where a.del_date is null 
 		AND b.del_date is NULL 
 		AND a.zzmm like '党员' 
 		And b.in_date>b.out_date
 		 <if test="t_start != '' ">
              AND a.add_date  &gt;=  #{t_start}
        </if>
        <if test=" t_end != ''  ">
              AND  a.add_date  &lt;=  #{t_end}
        </if>  		
		) as t1 group by t1.name
	) s on t.month = s.name GROUP BY t.month
	 </select>
	 
	 <select id="getxltjlist" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	 
	 SELECT
 '省交通运输人才职业服务中心' org_name,a.name,a.dpno,a.pnum,
CASE when a.sex =0 then '男'
     when a.sex=1 then '女'
			else a.sex end as sex,
date_format(a.birth_date,'%Y-%c-%d') birth_date,
a.zzmm,a.domicile,c.human_out1,c.bd_unit,c.point_proxy1,a.work_name,a.max_degree,
d.in_point,date_format(d.in_date,'%Y-%c-%d') in_date,

	group_concat(CASE WHEN b.education like '%博士%' THEN b.major end separator ",")as 'doctor_major',
	group_concat(CASE WHEN b.education like '%博士%' THEN date_format(b.graduation_date,'%Y-%c-%d') end separator ",") as 'doctor_graduation_date',
	group_concat(CASE WHEN b.education like '%博士%' THEN b.school_name end separator ",") as 'doctor_school_name',

	group_concat(CASE WHEN b.education like '%硕士%' THEN b.major end separator ",") as 'master_major',
	group_concat(CASE WHEN b.education like '%硕士%' THEN date_format(b.graduation_date,'%Y-%c-%d') end separator ",") as 'master_graduation_date',
	group_concat(CASE WHEN b.education like '%硕士%' THEN b.school_name end separator ",") as 'master_school_name',


	group_concat(CASE WHEN b.education like '%本科%' THEN b.major end separator ",") as 'bachelor_major',
	group_concat(CASE WHEN b.education like '%本科%' THEN date_format(b.graduation_date,'%Y-%c-%d') end separator ",") as 'bachelor_graduation_date',
	group_concat(CASE WHEN b.education like '%本科%' THEN b.school_name end separator ",") as 'bachelor_school_name',


	group_concat(CASE WHEN b.education like '%专科%' THEN b.major end separator ",") as 'specialized_major',
	group_concat(CASE WHEN b.education like '%专科%' THEN date_format(b.graduation_date,'%Y-%c-%d') end separator ",") as 'specialized_graduation_date',
	group_concat(CASE WHEN b.education like '%专科%' THEN b.school_name end separator ",") as 'specialized_school_name',


	group_concat(CASE WHEN b.education like '%高中%' THEN date_format(b.graduation_date,'%Y-%c-%d')end separator ",") as 'high_graduation_date',
	group_concat(CASE WHEN b.education like '%高中%' THEN b.school_name end separator ",") as 'high_school_name',


	group_concat(CASE WHEN b.education like '%中专%' THEN b.major end separator ",") as 'technical_major',
	group_concat(CASE WHEN b.education like '%中专%' THEN date_format(b.graduation_date,'%Y-%c-%d') end separator ",") as 'technical_graduation_date',
	group_concat(CASE WHEN b.education like '%中专%' THEN b.school_name end separator ",") as 'technical_school_name'

FROM
user_info a
LEFT JOIN user_mg_info c on a.id=c.uid
LEFT JOIN 
	study_info b on a.id=b.uid
LEFT JOIN archives_base_info d on a.dpno=d.p_no
where a.del_date is NULL and b.del_date is NULL and c.del_date is NULL and d.del_date is NULL 
	<if test="dpno != null">
		AND a.dpno = #{dpno}
	</if>
	<if test="pnum != null">
		AND a.pnum = #{pnum}
	</if>
	<if test="name!=null and name!=''">
		AND a.name like concat('%',#{name},'%')
	</if>
group by a.id
</select>

<select id="getuserBydpno" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	select 
		id,
		name,
		pnum,
		CASE sex
		when '0' then '男'
		when '1' then '女'
		ELSE sex END as sex
	from user_info
	where 
		dpno=#{dpno}
		limit 1
</select>
<select id="getUserById" parameterType="java.lang.Integer" resultType="java.util.HashMap">
SELECT
	id,
	name,
	pnum,
	sex,
	tel,
	DATE_FORMAT(birth_date,'%Y-%c-%d') birth_date,
	mz,
	zzmm,
	school,
	DATE_FORMAT(graduation_time,'%Y-%c-%d') graduation_time,
	major,
	degree,
	adr,
	email,
	qq,
	wx
FROM
	user_info
	where id=#{id}
	and del_date  is null
</select>
</mapper>