<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.i84.earnpoint.mapper.ArchivesLogMapper">
  <resultMap id="BaseResultMap" type="com.i84.earnpoint.model.ArchivesLog">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="m_date" jdbcType="TIMESTAMP" property="mDate" />
    <result column="m_column" jdbcType="VARCHAR" property="mColumn" />
    <result column="m_before" jdbcType="VARCHAR" property="mBefore" />
    <result column="m_after" jdbcType="VARCHAR" property="mAfter" />
    <result column="d_no" jdbcType="VARCHAR" property="dNo" />
    <result column="md_table" jdbcType="VARCHAR" property="mdTable" />
    <result column="org_uid" jdbcType="INTEGER" property="orgUid" />
    <result column="md_uid" jdbcType="INTEGER" property="mdUid" />
    <result column="md_date" jdbcType="TIMESTAMP" property="mdDate" />
    <result column="ip" jdbcType="VARCHAR" property="ip" />
    <result column="m_column_name" jdbcType="VARCHAR" property="mColumnName" />
    <result column="md_table_name" jdbcType="VARCHAR" property="mdTableName" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, m_date, m_column, m_before, m_after, d_no, md_table, org_uid, md_uid, md_date, 
    ip, m_column_name, md_table_name
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from archives_log
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from archives_log
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.i84.earnpoint.model.ArchivesLog">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into archives_log (id, m_date, m_column, 
      m_before, m_after, d_no, 
      md_table, org_uid, md_uid, 
      md_date, ip, m_column_name, 
      md_table_name)
    values (#{id,jdbcType=INTEGER}, #{mDate,jdbcType=TIMESTAMP}, #{mColumn,jdbcType=VARCHAR}, 
      #{mBefore,jdbcType=VARCHAR}, #{mAfter,jdbcType=VARCHAR}, #{dNo,jdbcType=VARCHAR}, 
      #{mdTable,jdbcType=VARCHAR}, #{orgUid,jdbcType=INTEGER}, #{mdUid,jdbcType=INTEGER}, 
      #{mdDate,jdbcType=TIMESTAMP}, #{ip,jdbcType=VARCHAR}, #{mColumnName,jdbcType=VARCHAR}, 
      #{mdTableName,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.i84.earnpoint.model.ArchivesLog">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into archives_log
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="mDate != null">
        m_date,
      </if>
      <if test="mColumn != null">
        m_column,
      </if>
      <if test="mBefore != null">
        m_before,
      </if>
      <if test="mAfter != null">
        m_after,
      </if>
      <if test="dNo != null">
        d_no,
      </if>
      <if test="mdTable != null">
        md_table,
      </if>
      <if test="orgUid != null">
        org_uid,
      </if>
      <if test="mdUid != null">
        md_uid,
      </if>
      <if test="mdDate != null">
        md_date,
      </if>
      <if test="ip != null">
        ip,
      </if>
      <if test="mColumnName != null">
        m_column_name,
      </if>
      <if test="mdTableName != null">
        md_table_name,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="mDate != null">
        #{mDate,jdbcType=TIMESTAMP},
      </if>
      <if test="mColumn != null">
        #{mColumn,jdbcType=VARCHAR},
      </if>
      <if test="mBefore != null">
        #{mBefore,jdbcType=VARCHAR},
      </if>
      <if test="mAfter != null">
        #{mAfter,jdbcType=VARCHAR},
      </if>
      <if test="dNo != null">
        #{dNo,jdbcType=VARCHAR},
      </if>
      <if test="mdTable != null">
        #{mdTable,jdbcType=VARCHAR},
      </if>
      <if test="orgUid != null">
        #{orgUid,jdbcType=INTEGER},
      </if>
      <if test="mdUid != null">
        #{mdUid,jdbcType=INTEGER},
      </if>
      <if test="mdDate != null">
        #{mdDate,jdbcType=TIMESTAMP},
      </if>
      <if test="ip != null">
        #{ip,jdbcType=VARCHAR},
      </if>
      <if test="mColumnName != null">
        #{mColumnName,jdbcType=VARCHAR},
      </if>
      <if test="mdTableName != null">
        #{mdTableName,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.i84.earnpoint.model.ArchivesLog">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update archives_log
    <set>
      <if test="mDate != null">
        m_date = #{mDate,jdbcType=TIMESTAMP},
      </if>
      <if test="mColumn != null">
        m_column = #{mColumn,jdbcType=VARCHAR},
      </if>
      <if test="mBefore != null">
        m_before = #{mBefore,jdbcType=VARCHAR},
      </if>
      <if test="mAfter != null">
        m_after = #{mAfter,jdbcType=VARCHAR},
      </if>
      <if test="dNo != null">
        d_no = #{dNo,jdbcType=VARCHAR},
      </if>
      <if test="mdTable != null">
        md_table = #{mdTable,jdbcType=VARCHAR},
      </if>
      <if test="orgUid != null">
        org_uid = #{orgUid,jdbcType=INTEGER},
      </if>
      <if test="mdUid != null">
        md_uid = #{mdUid,jdbcType=INTEGER},
      </if>
      <if test="mdDate != null">
        md_date = #{mdDate,jdbcType=TIMESTAMP},
      </if>
      <if test="ip != null">
        ip = #{ip,jdbcType=VARCHAR},
      </if>
      <if test="mColumnName != null">
        m_column_name = #{mColumnName,jdbcType=VARCHAR},
      </if>
      <if test="mdTableName != null">
        md_table_name = #{mdTableName,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.i84.earnpoint.model.ArchivesLog">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update archives_log
    set m_date = #{mDate,jdbcType=TIMESTAMP},
      m_column = #{mColumn,jdbcType=VARCHAR},
      m_before = #{mBefore,jdbcType=VARCHAR},
      m_after = #{mAfter,jdbcType=VARCHAR},
      d_no = #{dNo,jdbcType=VARCHAR},
      md_table = #{mdTable,jdbcType=VARCHAR},
      org_uid = #{orgUid,jdbcType=INTEGER},
      md_uid = #{mdUid,jdbcType=INTEGER},
      md_date = #{mdDate,jdbcType=TIMESTAMP},
      ip = #{ip,jdbcType=VARCHAR},
      m_column_name = #{mColumnName,jdbcType=VARCHAR},
      md_table_name = #{mdTableName,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  
  
 <select id="getList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
select 
  	 id, date_format(m_date,'%Y-%m-%d %H:%i:%s') m_date, m_column_name, m_before, m_after, d_no, md_table, b1.realName org_uid,b2.realName  md_uid, date_format(md_date,'%Y-%m-%d %H:%i:%s') md_date, 
    ip
    from archives_log i left join t_user b1 on i.org_uid = b1.userId left join t_user b2 on i.md_uid=b2.userId
    where 1=1
    <if test="dpno!=null">
       AND d_no = #{dpno}
    </if>
    ORDER BY i.md_date DESC
    
  </select>
</mapper>