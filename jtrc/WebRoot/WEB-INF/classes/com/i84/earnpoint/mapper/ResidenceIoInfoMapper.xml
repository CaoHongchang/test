<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.i84.earnpoint.mapper.ResidenceIoInfoMapper">
  <resultMap id="BaseResultMap" type="com.i84.earnpoint.model.ResidenceIoInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="d_id" jdbcType="INTEGER" property="dId" />
    <result column="out_date" jdbcType="VARCHAR" property="outDate" />
    <result column="out_use" jdbcType="VARCHAR" property="outUse" />
    <result column="out_uid" jdbcType="VARCHAR" property="outUid" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="j_uid" jdbcType="VARCHAR" property="jUid" />
    <result column="anum" jdbcType="INTEGER" property="anum" />
    <result column="staff" jdbcType="INTEGER" property="staff" />
    <result column="add_date" jdbcType="VARCHAR" property="addDate" />
    <result column="staffname" jdbcType="VARCHAR" property="staffname" />
    <result column="dpno" jdbcType="VARCHAR" property="dpno"/>
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, d_id, out_date, out_use, out_uid, remark, j_uid, anum, staff, add_date, staffname
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from residence_io_info
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from residence_io_info
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.i84.earnpoint.model.ResidenceIoInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into residence_io_info (id, d_id, out_date, 
      out_use, out_uid, remark, 
      j_uid, anum, staff, 
      add_date, staffname)
    values (#{id,jdbcType=INTEGER}, #{dId,jdbcType=INTEGER}, #{outDate,jdbcType=TIMESTAMP}, 
      #{outUse,jdbcType=VARCHAR}, #{outUid,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR}, 
      #{jUid,jdbcType=VARCHAR}, #{anum,jdbcType=INTEGER}, #{staff,jdbcType=INTEGER}, 
      #{addDate,jdbcType=TIMESTAMP}, #{staffname,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.i84.earnpoint.model.ResidenceIoInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into residence_io_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="dId != null">
        d_id,
      </if>
      <if test="outDate != null">
        out_date,
      </if>
      <if test="outUse != null">
        out_use,
      </if>
      <if test="outUid != null">
        out_uid,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="jUid != null">
        j_uid,
      </if>
      <if test="anum != null">
        anum,
      </if>
      <if test="staff != null">
        staff,
      </if>
      <if test="addDate != null">
        add_date,
      </if>
      <if test="staffname != null">
        staffname,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="dId != null">
        #{dId,jdbcType=INTEGER},
      </if>
      <if test="outDate != null">
        #{outDate,jdbcType=TIMESTAMP},
      </if>
      <if test="outUse != null">
        #{outUse,jdbcType=VARCHAR},
      </if>
      <if test="outUid != null">
        #{outUid,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="jUid != null">
        #{jUid,jdbcType=VARCHAR},
      </if>
      <if test="anum != null">
        #{anum,jdbcType=INTEGER},
      </if>
      <if test="staff != null">
        #{staff,jdbcType=INTEGER},
      </if>
      <if test="addDate != null">
        #{addDate,jdbcType=TIMESTAMP},
      </if>
      <if test="staffname != null">
        #{staffname,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.i84.earnpoint.model.ResidenceIoInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update residence_io_info
    <set>
      <if test="dId != null">
        d_id = #{dId,jdbcType=INTEGER},
      </if>
      <if test="outDate != null">
        out_date = #{outDate,jdbcType=TIMESTAMP},
      </if>
      <if test="outUse != null">
        out_use = #{outUse,jdbcType=VARCHAR},
      </if>
      <if test="outUid != null">
        out_uid = #{outUid,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="jUid != null">
        j_uid = #{jUid,jdbcType=VARCHAR},
      </if>
      <if test="anum != null">
        anum = #{anum,jdbcType=INTEGER},
      </if>
      <if test="staff != null">
        staff = #{staff,jdbcType=INTEGER},
      </if>
      <if test="addDate != null">
        add_date = #{addDate,jdbcType=TIMESTAMP},
      </if>
      <if test="staffname != null">
        staffname = #{staffname,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.i84.earnpoint.model.ResidenceIoInfo">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update residence_io_info
    set d_id = #{dId,jdbcType=INTEGER},
      out_date = #{outDate,jdbcType=TIMESTAMP},
      out_use = #{outUse,jdbcType=VARCHAR},
      out_uid = #{outUid,jdbcType=VARCHAR},
      remark = #{remark,jdbcType=VARCHAR},
      j_uid = #{jUid,jdbcType=VARCHAR},
      anum = #{anum,jdbcType=INTEGER},
      staff = #{staff,jdbcType=INTEGER},
      add_date = #{addDate,jdbcType=TIMESTAMP},
      staffname = #{staffname,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  
  
  <select id="queryResidenceIoInfo" parameterType="java.util.Map" resultMap="BaseResultMap">
       SELECT RII.ID,
			   RII.D_ID,
			   STR_TO_DATE(RII.OUT_DATE,'%Y-%m-%d') OUT_DATE,
			   RII.OUT_USE,
			   RII.OUT_UID,
			   RII.REMARK,
			   RII.J_UID,
			   RII.ANUM,
			   RII.STAFF,
               STR_TO_DATE(RII.ADD_DATE,'%Y-%m-%d %H:%i:%s') ADD_DATE,
               RII.STAFFNAME,
               UMI.DPNO
         FROM RESIDENCE_IO_INFO RII
         LEFT JOIN USER_MG_INFO UMI ON RII.D_ID = UMI.ID
         WHERE 1=1
         <if test="p_no!=null">
         	AND UMI.dpno = #{p_no}
         </if>
         <if test="acceptDate!=null">
         	AND RII.OUT_DATE = #{acceptDate}
         </if>
          <if test="archiveNum!=null">
         	AND RII.ANUM = #{archiveNum}
         </if>
          <if test="sender!=null">
         	AND RII.OUT_UID like concat('%',#{sender},'%')
         </if>
          <if test="accepter!=null">
         	AND RII.J_UID = like concat('%',#{accepter},'%')
         </if>
          ORDER BY ADD_DATE DESC
  </select>
</mapper>