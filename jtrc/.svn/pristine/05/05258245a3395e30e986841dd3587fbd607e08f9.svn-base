<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.i84.earnpoint.mapper.ArchivesKhInfoMapper" >
  <resultMap id="BaseResultMap" type="com.i84.earnpoint.model.ArchivesKhInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="p_no" property="pNo" jdbcType="VARCHAR" />
    <result column="point_name" property="pointName" jdbcType="VARCHAR" />
    <result column="kh_date" property="khDate" jdbcType="TIMESTAMP" />
    <result column="gr_all" property="grAll" jdbcType="VARCHAR" />
    <result column="zz_state" property="zzState" jdbcType="VARCHAR" />
    <result column="work_state" property="workState" jdbcType="VARCHAR" />
    <result column="work_result" property="workResult" jdbcType="VARCHAR" />
    <result column="deal_msg" property="dealMsg" jdbcType="VARCHAR" />
    <result column="cx_ability" property="cxAbility" jdbcType="VARCHAR" />
    <result column="gt_ability" property="gtAbility" jdbcType="VARCHAR" />
    <result column="zz_ability" property="zzAbility" jdbcType="VARCHAR" />
    <result column="kh_result" property="khResult" jdbcType="VARCHAR" />
    <result column="kh_advice" property="khAdvice" jdbcType="VARCHAR" />
    <result column="year_kh" property="yearKh" jdbcType="VARCHAR" />
    <result column="zg_advice" property="zgAdvice" jdbcType="VARCHAR" />
    <result column="p_name" property="pName" jdbcType="VARCHAR" />
    <result column="p_url" property="pUrl" jdbcType="VARCHAR" />
    <result column="p_date" property="pDate" jdbcType="TIMESTAMP" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="stuff" property="stuff" jdbcType="INTEGER" />
    <result column="add_date" property="addDate" jdbcType="TIMESTAMP" />
    <result column="file_code" property="fileCode" jdbcType="VARCHAR" />
    <result column="file_name" property="fileName" jdbcType="VARCHAR" />
    <result column="page_num" property="pageNum" jdbcType="INTEGER" />
    <result column="sort" property="sort" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, p_no, point_name, kh_date, gr_all, zz_state, work_state, work_result, deal_msg, 
    cx_ability, gt_ability, zz_ability, kh_result, kh_advice, year_kh, zg_advice, p_name, 
    p_url, p_date, remark, stuff, add_date, file_code, file_name, page_num
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from archives_kh_info
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from archives_kh_info
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.i84.earnpoint.model.ArchivesKhInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into archives_kh_info (id, p_no, point_name, 
      kh_date, gr_all, zz_state, 
      work_state, work_result, deal_msg, 
      cx_ability, gt_ability, zz_ability, 
      kh_result, kh_advice, year_kh, 
      zg_advice, p_name, p_url, 
      p_date, remark, stuff, 
      add_date, file_code, file_name, 
      page_num)
    values (#{id,jdbcType=INTEGER}, #{pNo,jdbcType=VARCHAR}, #{pointName,jdbcType=VARCHAR}, 
      #{khDate,jdbcType=TIMESTAMP}, #{grAll,jdbcType=VARCHAR}, #{zzState,jdbcType=VARCHAR}, 
      #{workState,jdbcType=VARCHAR}, #{workResult,jdbcType=VARCHAR}, #{dealMsg,jdbcType=VARCHAR}, 
      #{cxAbility,jdbcType=VARCHAR}, #{gtAbility,jdbcType=VARCHAR}, #{zzAbility,jdbcType=VARCHAR}, 
      #{khResult,jdbcType=VARCHAR}, #{khAdvice,jdbcType=VARCHAR}, #{yearKh,jdbcType=VARCHAR}, 
      #{zgAdvice,jdbcType=VARCHAR}, #{pName,jdbcType=VARCHAR}, #{pUrl,jdbcType=VARCHAR}, 
      #{pDate,jdbcType=TIMESTAMP}, #{remark,jdbcType=VARCHAR}, #{stuff,jdbcType=INTEGER}, 
      #{addDate,jdbcType=TIMESTAMP}, #{fileCode,jdbcType=VARCHAR}, #{fileName,jdbcType=VARCHAR}, 
      #{pageNum,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" useGeneratedKeys="true" keyProperty="id"  parameterType="com.i84.earnpoint.model.ArchivesKhInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into archives_kh_info
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="pNo != null" >
        p_no,
      </if>
      <if test="pointName != null" >
        point_name,
      </if>
      <if test="khDate != null" >
        kh_date,
      </if>
      <if test="grAll != null" >
        gr_all,
      </if>
      <if test="zzState != null" >
        zz_state,
      </if>
      <if test="workState != null" >
        work_state,
      </if>
      <if test="workResult != null" >
        work_result,
      </if>
      <if test="dealMsg != null" >
        deal_msg,
      </if>
      <if test="cxAbility != null" >
        cx_ability,
      </if>
      <if test="gtAbility != null" >
        gt_ability,
      </if>
      <if test="zzAbility != null" >
        zz_ability,
      </if>
      <if test="khResult != null" >
        kh_result,
      </if>
      <if test="khAdvice != null" >
        kh_advice,
      </if>
      <if test="yearKh != null" >
        year_kh,
      </if>
      <if test="zgAdvice != null" >
        zg_advice,
      </if>
      <if test="pName != null" >
        p_name,
      </if>
      <if test="pUrl != null" >
        p_url,
      </if>
      <if test="pDate != null" >
        p_date,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="stuff != null" >
        stuff,
      </if>
      <if test="addDate != null" >
        add_date,
      </if>
      <if test="fileCode != null" >
        file_code,
      </if>
      <if test="fileName != null" >
        file_name,
      </if>
      <if test="pageNum != null" >
        page_num,
      </if>
       <if test="sort != null" >
        sort,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="pNo != null" >
        #{pNo,jdbcType=VARCHAR},
      </if>
      <if test="pointName != null" >
        #{pointName,jdbcType=VARCHAR},
      </if>
      <if test="khDate != null" >
        #{khDate,jdbcType=TIMESTAMP},
      </if>
      <if test="grAll != null" >
        #{grAll,jdbcType=VARCHAR},
      </if>
      <if test="zzState != null" >
        #{zzState,jdbcType=VARCHAR},
      </if>
      <if test="workState != null" >
        #{workState,jdbcType=VARCHAR},
      </if>
      <if test="workResult != null" >
        #{workResult,jdbcType=VARCHAR},
      </if>
      <if test="dealMsg != null" >
        #{dealMsg,jdbcType=VARCHAR},
      </if>
      <if test="cxAbility != null" >
        #{cxAbility,jdbcType=VARCHAR},
      </if>
      <if test="gtAbility != null" >
        #{gtAbility,jdbcType=VARCHAR},
      </if>
      <if test="zzAbility != null" >
        #{zzAbility,jdbcType=VARCHAR},
      </if>
      <if test="khResult != null" >
        #{khResult,jdbcType=VARCHAR},
      </if>
      <if test="khAdvice != null" >
        #{khAdvice,jdbcType=VARCHAR},
      </if>
      <if test="yearKh != null" >
        #{yearKh,jdbcType=VARCHAR},
      </if>
      <if test="zgAdvice != null" >
        #{zgAdvice,jdbcType=VARCHAR},
      </if>
      <if test="pName != null" >
        #{pName,jdbcType=VARCHAR},
      </if>
      <if test="pUrl != null" >
        #{pUrl,jdbcType=VARCHAR},
      </if>
      <if test="pDate != null" >
        #{pDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="stuff != null" >
        #{stuff,jdbcType=INTEGER},
      </if>
      <if test="addDate != null" >
        #{addDate,jdbcType=TIMESTAMP},
      </if>
      <if test="fileCode != null" >
        #{fileCode,jdbcType=VARCHAR},
      </if>
      <if test="fileName != null" >
        #{fileName,jdbcType=VARCHAR},
      </if>
      <if test="pageNum != null" >
        #{pageNum,jdbcType=INTEGER},
      </if>
      <if test="sort != null" >
        #{sort,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.i84.earnpoint.model.ArchivesKhInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update archives_kh_info
    <set >
      <if test="pNo != null" >
        p_no = #{pNo,jdbcType=VARCHAR},
      </if>
      <if test="pointName != null" >
        point_name = #{pointName,jdbcType=VARCHAR},
      </if>
      <if test="khDate != null" >
        kh_date = #{khDate,jdbcType=TIMESTAMP},
      </if>
      <if test="grAll != null" >
        gr_all = #{grAll,jdbcType=VARCHAR},
      </if>
      <if test="zzState != null" >
        zz_state = #{zzState,jdbcType=VARCHAR},
      </if>
      <if test="workState != null" >
        work_state = #{workState,jdbcType=VARCHAR},
      </if>
      <if test="workResult != null" >
        work_result = #{workResult,jdbcType=VARCHAR},
      </if>
      <if test="dealMsg != null" >
        deal_msg = #{dealMsg,jdbcType=VARCHAR},
      </if>
      <if test="cxAbility != null" >
        cx_ability = #{cxAbility,jdbcType=VARCHAR},
      </if>
      <if test="gtAbility != null" >
        gt_ability = #{gtAbility,jdbcType=VARCHAR},
      </if>
      <if test="zzAbility != null" >
        zz_ability = #{zzAbility,jdbcType=VARCHAR},
      </if>
      <if test="khResult != null" >
        kh_result = #{khResult,jdbcType=VARCHAR},
      </if>
      <if test="khAdvice != null" >
        kh_advice = #{khAdvice,jdbcType=VARCHAR},
      </if>
      <if test="yearKh != null" >
        year_kh = #{yearKh,jdbcType=VARCHAR},
      </if>
      <if test="zgAdvice != null" >
        zg_advice = #{zgAdvice,jdbcType=VARCHAR},
      </if>
      <if test="pName != null" >
        p_name = #{pName,jdbcType=VARCHAR},
      </if>
      <if test="pUrl != null" >
        p_url = #{pUrl,jdbcType=VARCHAR},
      </if>
      
        p_date = #{pDate,jdbcType=TIMESTAMP},
    
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="stuff != null" >
        stuff = #{stuff,jdbcType=INTEGER},
      </if>
      <if test="addDate != null" >
        add_date = #{addDate,jdbcType=TIMESTAMP},
      </if>
      <if test="fileCode != null" >
        file_code = #{fileCode,jdbcType=VARCHAR},
      </if>
      <if test="fileName != null" >
        file_name = #{fileName,jdbcType=VARCHAR},
      </if>
      <if test="pageNum != null" >
        page_num = #{pageNum,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.i84.earnpoint.model.ArchivesKhInfo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update archives_kh_info
    set p_no = #{pNo,jdbcType=VARCHAR},
      point_name = #{pointName,jdbcType=VARCHAR},
      kh_date = #{khDate,jdbcType=TIMESTAMP},
      gr_all = #{grAll,jdbcType=VARCHAR},
      zz_state = #{zzState,jdbcType=VARCHAR},
      work_state = #{workState,jdbcType=VARCHAR},
      work_result = #{workResult,jdbcType=VARCHAR},
      deal_msg = #{dealMsg,jdbcType=VARCHAR},
      cx_ability = #{cxAbility,jdbcType=VARCHAR},
      gt_ability = #{gtAbility,jdbcType=VARCHAR},
      zz_ability = #{zzAbility,jdbcType=VARCHAR},
      kh_result = #{khResult,jdbcType=VARCHAR},
      kh_advice = #{khAdvice,jdbcType=VARCHAR},
      year_kh = #{yearKh,jdbcType=VARCHAR},
      zg_advice = #{zgAdvice,jdbcType=VARCHAR},
      p_name = #{pName,jdbcType=VARCHAR},
      p_url = #{pUrl,jdbcType=VARCHAR},
      p_date = #{pDate,jdbcType=TIMESTAMP},
      remark = #{remark,jdbcType=VARCHAR},
      stuff = #{stuff,jdbcType=INTEGER},
      add_date = #{addDate,jdbcType=TIMESTAMP},
      file_code = #{fileCode,jdbcType=VARCHAR},
      file_name = #{fileName,jdbcType=VARCHAR},
      page_num = #{pageNum,jdbcType=INTEGER}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <select id="selectByPno" resultType="java.util.HashMap" parameterType="com.i84.earnpoint.model.ArchivesKhInfo">
   select a.id,file_code,file_name,page_num,date_format(a.add_date,'%Y-%m-%d') add_date,b.realName userName,date_format(a.p_date,'%Y-%m-%d') pdate,
    p_name pname,remark,point_name pointname,date_format(a.kh_date,'%Y-%m-%d') khdate,gr_all grall,zz_state zzstate,work_state workstate,work_result workresult,
    deal_msg dealmsg,cx_ability cxability,gt_ability gtability,zz_ability zzability,kh_result khresult,kh_advice khadvice,year_kh yearkh,zg_advice zgadvice,
    p_url
    from archives_kh_info a left join t_user b on a.stuff = b.userId
    where p_no = #{pNo,jdbcType=VARCHAR} and del_time is null order by sort
    </select>
    
    
      <update id="sort" parameterType="com.i84.earnpoint.gdcl.BO.SerchBO">
   update archives_kh_info 
      set sort =  #{sort,jdbcType=INTEGER}
      where id=#{id,jdbcType=INTEGER}
  </update>
  
  <select id="getsort" parameterType="java.util.HashMap" resultType="java.util.HashMap">
	  select sort from archives_kh_info 
	  where p_no=#{pno,jdbcType=VARCHAR}
	  ORDER BY sort DESC limit 1
  </select>
  
</mapper>